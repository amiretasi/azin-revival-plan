<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>داشبورد جامع فرماندهی سایپا آذین</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #0f172a;   /* Deep Navy */
            --secondary: #3b82f6; /* Vivid Blue */
            --accent: #b45309;    /* Elegant Amber/Gold */
            --danger: #be123c;    /* Deep Red */
            --success: #047857;   /* Deep Green */
            --bg: #f1f5f9;        /* Slate 100 */
            --card-bg: #ffffff;
            --header-grad: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            --font-main: 'Vazirmatn', sans-serif;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg);
            color: #334155;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* --- Header --- */
        .dashboard-header {
            background: var(--header-grad);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            margin-bottom: 25px;
            border-bottom: 4px solid var(--accent);
        }
        .dashboard-header h1 { margin: 0; font-weight: 900; font-size: 2.2rem; letter-spacing: -0.5px; }
        .dashboard-header p { margin: 8px 0 0; font-weight: 300; color: #cbd5e1; font-size: 1.05rem; }

        /* --- Container --- */
        .container {
            max-width: 1380px;
            margin: 0 auto;
            padding: 0 20px 60px 20px;
        }

        /* --- KPI Cards --- */
        .kpi-row {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        .kpi-card {
            flex: 1;
            background: var(--card-bg);
            padding: 18px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border-right: 5px solid var(--secondary);
            min-width: 200px;
            text-align: center;
            transition: transform 0.2s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .kpi-card:hover { transform: translateY(-3px); box-shadow: 0 8px 15px rgba(0,0,0,0.1); }
        .kpi-title { font-size: 0.9rem; color: #64748b; font-weight: 700; margin-bottom: 5px; }
        .kpi-value { font-size: 1.6rem; font-weight: 900; color: var(--primary); }
        .kpi-sub { font-size: 0.8rem; font-weight: 600; margin-top: 5px; color: #64748b; }

        /* --- Accordion --- */
        .accordion {
            background-color: var(--card-bg);
            color: var(--primary);
            cursor: pointer;
            padding: 16px 25px;
            width: 100%;
            text-align: right;
            border: none;
            outline: none;
            transition: 0.3s;
            font-size: 1.1rem;
            font-weight: 800;
            border-radius: 10px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.04);
            font-family: var(--font-main);
        }
        .accordion:hover { background-color: #e2e8f0; }
        .accordion.active { background-color: white; border-bottom: 3px solid var(--secondary); color: var(--secondary); border-radius: 10px 10px 0 0; }
        .accordion::after {
            content: '\f078'; font-family: "Font Awesome 6 Free"; font-weight: 900;
            color: #94a3b8; transition: transform 0.3s;
        }
        .accordion.active::after { transform: rotate(180deg); color: var(--secondary); }

        .panel {
            padding: 0;
            background-color: transparent;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            margin-bottom: 20px;
        }
        .panel-content {
            background: white;
            padding: 25px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 5px 15px -5px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
            border-top: none;
        }

        /* --- Panel Themes --- */
        .panel-financial .accordion { border-right: 6px solid var(--danger); }
        .panel-financial .panel-content { background-color: #fff1f2; border-color: #fecaca; }
        .panel-retiree .accordion { border-right: 6px solid var(--accent); }
        .panel-retiree .panel-content { background-color: #fffbeb; border-color: #fde68a; }

        /* --- Charts Grid --- */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }
        .chart-box {
            background: #fff;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            height: 450px;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .chart-box h3 {
            margin: 0 0 15px 0; font-size: 1rem; color: #334155; font-weight: 800;
            border-bottom: 2px solid #f1f5f9; padding-bottom: 10px; width: 100%; text-align: center;
        }
        .full-width { grid-column: 1 / -1; }
        .chart-container-inner { flex-grow: 1; position: relative; width: 100%; }

        /* --- Side-by-Side Layout (Flex) --- */
        .side-by-side {
            display: flex;
            width: 100%;
            height: 100%;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        .side-by-side.top-align { align-items: flex-start; }
        
        /* Adjusted: Table on Right, Chart on Left/Right as needed */
        .side-chart { width: 48%; height: 100%; position: relative; display: flex; justify-content: center; align-items: center; }
        .side-table-container { width: 48%; height: 100%; overflow-y: auto; }

        /* --- Mini Tables --- */
        .mini-table {
            width: 100%; border-collapse: collapse; font-size: 0.9rem;
        }
        .mini-table td { padding: 10px 8px; border-bottom: 1px solid #eee; }
        .mini-table tr:last-child td { border-bottom: none; font-weight: 800; }
        .mini-table .label { color: #475569; font-weight: 600; }
        .mini-table .value { text-align: left; direction: ltr; font-weight: 700; color: var(--primary); }
        
        /* --- Org Level Table --- */
        .org-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; margin-top: 10px; }
        .org-table th { background: #f1f5f9; padding: 10px; text-align: center; color: #475569; font-weight: 800; border-bottom: 2px solid #cbd5e1; }
        .org-table td { padding: 8px; text-align: center; border-bottom: 1px solid #f1f5f9; }
        .org-table tr:last-child td { border-bottom: none; }

        /* --- Data Tables --- */
        .table-wrapper {
            max-height: 450px;
            overflow-y: auto;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            background: white;
        }
        table.main-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        table.main-table th {
            background-color: var(--primary); color: white;
            position: sticky; top: 0; padding: 12px; text-align: right;
            font-weight: 700; z-index: 10; cursor: pointer;
        }
        table.main-table td { padding: 10px 12px; border-bottom: 1px solid #f1f5f9; }
        table.main-table tr:hover { background-color: #f0f9ff; }

        /* --- Badges --- */
        .badge { padding: 3px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 700; display: inline-block; }
        .badge-saf { background: #dcfce7; color: #166534; }
        .badge-setad { background: #ffedd5; color: #9a3412; }
        .badge-male { background: #e0f2fe; color: #0369a1; }
        .badge-female { background: #fce7f3; color: #be185d; }
        
        /* --- Section Titles --- */
        .section-title {
            color: #b45309; font-weight: 800; font-size: 1rem; 
            border-right: 4px solid #b45309; padding-right: 10px; margin: 20px 0 10px 0;
            display: flex; justify-content: space-between; align-items: center;
        }
        .total-display {
             background: #fef3c7; padding: 4px 12px; border-radius: 6px; font-size: 0.9rem; color: #92400e; font-weight: 900;
        }

        /* --- Search --- */
        .search-box {
            width: 100%; padding: 12px; margin-bottom: 15px;
            border: 2px solid #e2e8f0; border-radius: 8px;
            font-family: var(--font-main); font-size: 1rem; transition: border-color 0.2s;
        }
        .search-box:focus { outline: none; border-color: var(--secondary); }

        @media (max-width: 1024px) {
            .charts-grid { grid-template-columns: 1fr; }
            .side-by-side { flex-direction: column; }
            .side-chart, .side-table-container { width: 100%; }
        }
    </style>
</head>
<body>

    <div class="dashboard-header">
        <h1>داشبورد جامع فرماندهی</h1>
        <p>تحلیل استراتژیک سرمایه انسانی و وضعیت مالی شرکت سایپا آذین | آذر ۱۴۰۴</p>
    </div>

    <div class="container">

        <!-- KPI Section -->
        <div class="kpi-row">
            <div class="kpi-card" style="border-color: var(--primary);">
                <span class="kpi-title">کل پرسنل فعال</span>
                <span class="kpi-value" id="kpi-total">1,004</span>
            </div>
            <div class="kpi-card" style="border-color: var(--success);">
                <span class="kpi-title">نیروهای صف (تولید)</span>
                <span class="kpi-value" id="kpi-saf">771</span>
                <span class="kpi-sub" style="color: var(--success);">۷۷٪ سازمان</span>
            </div>
            <div class="kpi-card" style="border-color: var(--accent);">
                <span class="kpi-title">نیروهای ستاد</span>
                <span class="kpi-value" id="kpi-setad">233</span>
                <span class="kpi-sub" style="color: var(--accent);">۲۳٪ سازمان</span>
            </div>
            <div class="kpi-card" style="border-color: var(--danger);">
                <span class="kpi-title">کل ذخیره سنوات (تجمعی)</span>
                <span class="kpi-value">1,622</span>
                <span class="kpi-sub" style="color: var(--danger);">میلیارد ریال</span>
            </div>
        </div>

        <!-- 1. Structure Analysis -->
        <div class="accordion-wrapper">
            <button class="accordion">۱. تحلیل ساختار سازمانی و واحدهای کاری</button>
            <div class="panel"><div class="panel-content">
                <div class="charts-grid">
                    <!-- Row 1: Pie + Org Table -->
                    <div class="chart-box">
                        <h3>نسبت صف به ستاد</h3>
                        <div class="side-by-side">
                            <div class="side-chart"><canvas id="safSetadPie"></canvas></div>
                            <div class="side-table-container">
                                <table class="mini-table">
                                    <tr><td class="label">نیروهای صف</td><td class="value">771 نفر</td></tr>
                                    <tr><td class="label">نیروهای ستاد</td><td class="value">233 نفر</td></tr>
                                    <tr style="background:#f1f5f9;"><td class="label">جمع کل</td><td class="value">1,004 نفر</td></tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-box">
                        <h3>تفکیک سطوح و سمت‌های سازمانی</h3>
                        <div class="table-wrapper" style="width:100%; border:none;">
                            <table class="org-table">
                                <thead><tr><th>سطح سازمانی</th><th>تعداد</th><th>درصد</th></tr></thead>
                                <tbody>
                                    <tr><td>کارگر / اپراتور</td><td>680</td><td>67.7%</td></tr>
                                    <tr><td>تکنسین / سرپرست</td><td>150</td><td>14.9%</td></tr>
                                    <tr><td>کارشناس</td><td>120</td><td>11.9%</td></tr>
                                    <tr><td>رئیس</td><td>40</td><td>3.9%</td></tr>
                                    <tr><td>مدیر / معاون / مشاور</td><td>14</td><td>1.4%</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Row 2: Unit Breakdown (Side by Side) -->
                    <div class="chart-box full-width" style="height: auto; min-height: 450px;">
                        <h3>توزیع پرسنل به تفکیک واحدهای کاری</h3>
                        <div class="side-by-side top-align">
                            <!-- Chart Left -->
                            <div class="side-chart">
                                <div class="chart-container-inner" style="height: 350px;">
                                    <canvas id="unitChart"></canvas>
                                </div>
                            </div>
                            <!-- Table Right -->
                            <div class="side-table-container">
                                <table class="org-table" id="unitTable" style="margin-top:0;">
                                    <thead><tr><th>واحد سازمانی</th><th>تعداد</th><th>درصد</th></tr></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div></div>
        </div>

        <!-- 2 & 3 Merged: Human Capital (Education & Majors) -->
        <div class="accordion-wrapper">
            <button class="accordion">۲. تحلیل سرمایه انسانی (تحصیلات و رشته)</button>
            <div class="panel"><div class="panel-content">
                <div class="charts-grid">
                    <!-- SIDE BY SIDE EDUCATION -->
                    <div class="chart-box full-width" style="height: 450px;">
                        <h3>وضعیت تحصیلی پرسنل (توزیع کل و تفکیک)</h3>
                        <div class="side-by-side">
                            <div class="side-chart">
                                <canvas id="educationChart"></canvas>
                            </div>
                            <div class="side-chart">
                                <canvas id="eduSplitChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="chart-box full-width tall-chart">
                        <h3>۱۰ رشته اصلی + مهندسی‌های پایه (عمران، مکانیک) + سایر</h3>
                        <div class="chart-container-inner"><canvas id="majorsChart"></canvas></div>
                    </div>
                </div>
            </div></div>
        </div>

        <!-- 4. Personnel Database -->
        <div class="accordion-wrapper">
            <button class="accordion">۳. بانک اطلاعاتی پرسنل</button>
            <div class="panel"><div class="panel-content">
                <input type="text" id="personnelSearch" class="search-box" placeholder="جستجو در نام، واحد، مدرک...">
                <div class="table-wrapper">
                    <table class="main-table" id="personnelTable">
                        <thead>
                            <tr>
                                <th onclick="sortTable('personnelTable',0)">ردیف <i class="fas fa-sort"></i></th>
                                <th onclick="sortTable('personnelTable',1)">شماره <i class="fas fa-sort"></i></th>
                                <th onclick="sortTable('personnelTable',2)">نام و نام خانوادگی <i class="fas fa-sort"></i></th>
                                <th onclick="sortTable('personnelTable',3)">جنسیت <i class="fas fa-sort"></i></th>
                                <th onclick="sortTable('personnelTable',4)">واحد <i class="fas fa-sort"></i></th>
                                <th onclick="sortTable('personnelTable',5)">مدرک <i class="fas fa-sort"></i></th>
                                <th onclick="sortTable('personnelTable',6)">رشته <i class="fas fa-sort"></i></th>
                                <th onclick="sortTable('personnelTable',7)">رسته <i class="fas fa-sort"></i></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div style="margin-top: 5px; font-size: 0.8rem; color: #64748b;">تعداد رکورد: <span id="setad-count">0</span></div>
            </div></div>
        </div>

        <!-- 5. Retirees & Resigned (Split) -->
        <div class="accordion-wrapper panel-retiree">
            <button class="accordion">۴. وضعیت بازنشستگان و مستعفی‌ها (اصلاح شده)</button>
            <div class="panel"><div class="panel-content">
                
                <div class="charts-grid">
                    <!-- Debt Share Pie + Table -->
                    <div class="chart-box full-width" style="height: 350px;">
                        <h3>سهم بدهی سنوات (لیست جاری)</h3>
                        <div class="side-by-side">
                            <div class="side-chart"><canvas id="retireeDebtChart"></canvas></div>
                            <div class="side-table-container">
                                <table class="mini-table">
                                    <tr>
                                        <td class="label">بازنشستگان (لیست جدید)</td>
                                        <td class="value" style="color: #d97706;" id="sum-retired-table">0</td>
                                    </tr>
                                    <tr>
                                        <td class="label">مستعفی و قطع همکاری (لیست کامل)</td>
                                        <td class="value" style="color: #1e3a8a;" id="sum-resigned-table">0</td>
                                    </tr>
                                    <tr style="background: #fffbeb; border-top: 2px solid #d97706;">
                                        <td class="label" style="font-weight: 900; color: #92400e;">جمع تعهدات جاری (نمایشی)</td>
                                        <td class="value" style="font-size: 1.1rem; color: #92400e;" id="sum-total-table">0</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Split Tables -->
                    <div class="chart-box full-width tall-chart" style="height: auto; min-height: 500px;">
                        <!-- Retired Table -->
                        <div class="section-title">
                            لیست بازنشستگان (عادی و زیان‌آور)
                            <span class="total-display" id="total-retired-display">جمع: ...</span>
                        </div>
                        <div class="table-wrapper" style="height: 250px; margin-bottom: 30px;">
                            <table class="main-table" id="retiredTableList">
                                <thead>
                                    <tr>
                                        <th>ردیف</th><th>پرسنلی</th><th>نام و نام خانوادگی</th><th>تاریخ قطع همکاری</th><th>مانده سنوات (ریال)</th><th>علت انفصال</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                        <!-- Resigned Table -->
                        <div class="section-title" style="color: #1e3a8a; border-color: #1e3a8a;">
                            لیست مستعفی‌ها و قطع همکاری
                            <span class="total-display" style="color: #1e3a8a; background: #e0f2fe;" id="total-resigned-display">جمع: ...</span>
                        </div>
                        <div class="table-wrapper" style="height: 250px;">
                            <table class="main-table" id="resignedTableList">
                                <thead>
                                    <tr>
                                        <th>ردیف</th><th>پرسنلی</th><th>نام و نام خانوادگی</th><th>تاریخ قطع همکاری</th><th>مانده سنوات (ریال)</th><th>توضیحات</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div></div>
        </div>

        <!-- 6. Financial Analysis -->
        <div class="accordion-wrapper panel-financial">
            <button class="accordion">۵. آنالیز مالی (حقوق، بودجه و بدهی)</button>
            <div class="panel"><div class="panel-content">
                <div class="charts-grid">
                    
                    <!-- Budget Section -->
                    <div class="chart-box full-width" style="height: 350px;">
                        <h3>بودجه ماهانه مورد نیاز (آبان ۱۴۰۴) - منطبق با برآورد مالی</h3>
                        <div class="side-by-side">
                            <div class="side-table-container">
                                <table class="mini-table" style="width: 100%;">
                                    <tbody id="budgetTableBody"></tbody>
                                </table>
                                <div style="margin-top: 15px; padding: 8px; background: #fff1f2; border: 1px solid #ef4444; border-radius: 6px; text-align: center; font-weight: 900; color: #991b1b; font-size: 0.95rem;">
                                    جمع کل ناخالص بودجه ماهانه: ۵۱۰,۵۴۵,۵۵۰,۷۶۲ ریال
                                </div>
                            </div>
                            <div class="side-chart"><canvas id="budgetChart"></canvas></div>
                        </div>
                    </div>

                    <!-- Debt & Insurance Side by Side -->
                    <div class="chart-box full-width" style="height: 450px;">
                        <h3>آنالیز جامع بدهی‌ها و تعهدات بیمه‌ای</h3>
                        <div class="side-by-side">
                            <div class="side-chart" style="width: 48%;">
                                <canvas id="debtChart"></canvas>
                            </div>
                            <div class="side-chart" style="width: 48%;">
                                <canvas id="insuranceChart"></canvas>
                            </div>
                        </div>
                    </div>

                </div>
            </div></div>
        </div>

    </div>

    <script>
        // --- CONFIG ---
        // Register and safely configure ChartDataLabels
        Chart.register(ChartDataLabels);
        Chart.defaults.set('plugins.datalabels', {
            display: false
        });

        Chart.defaults.font.family = 'Vazirmatn';
        Chart.defaults.color = '#334155';
        Chart.defaults.scale.grid.color = '#e2e8f0';

        // --- DATA ---
        
        // 1. Setad Personnel
        const setadPersonnel = [
            {id:'308',name:'رضا صحبت ‌لو',unit:'حراست',degree:'ديپلم',major:'اقتصاد',safSetad:'ستاد'},
            {id:'378',name:'فاطمه ايوبي',unit:'طرح و برنامه',degree:'ليسانس',major:'نرم افزارکامپيوتر',safSetad:'ستاد'},
            {id:'425',name:'ابوالقاسم مشايخي',unit:'کيفيت',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'534',name:'بهناز آقابگلو',unit:'کيفيت',degree:'ديپلم',major:'علوم تجربي',safSetad:'ستاد'},
            {id:'583',name:'شهرام بزرگ نژاد',unit:'مالي واقتصادي',degree:'فوق ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'790',name:'هادي تحويلداري بيدروني',unit:'نگهداري و تعميرات',degree:'ليسانس',major:'مترجمي زبان انگليسي',safSetad:'ستاد'},
            {id:'807',name:'حميدرضا قلي زاده بيرون',unit:'مديريت عامل',degree:'ليسانس',major:'علوم اجتماعي',safSetad:'ستاد'},
            {id:'810',name:'شهرام پارساء',unit:'نگهداري و تعميرات',degree:'فوق ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'850',name:'بابک اناري',unit:'مهندسي فرايند',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'859',name:'عباس خانقلي پور',unit:'مالي واقتصادي',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'869',name:'بيژن عزتي نيا',unit:'برنامه ريزي',degree:'فوق ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'877',name:'مني زارعي',unit:'اداري',degree:'ليسانس',major:'مترجمي زبان انگليسي',safSetad:'ستاد'},
            {id:'893',name:'فردين قاسمي',unit:'برنامه ريزي',degree:'ليسانس',major:'مهندسي مکانيک',safSetad:'ستاد'},
            {id:'895',name:'مجيد نيک فلاح',unit:'کيفيت',degree:'فوق ديپلم',major:'نرم افزارکامپيوتر',safSetad:'ستاد'},
            {id:'905',name:'كريم بهدادكيا',unit:'تحقيق وتوسعه',degree:'ليسانس',major:'مهندسي مکانيک',safSetad:'ستاد'},
            {id:'923',name:'حسين يزداني',unit:'توليد فلزي',degree:'ليسانس',major:'مهندسي مکانيک',safSetad:'ستاد'},
            {id:'958',name:'رضا قاسملو',unit:'توليدغيرفلزي',degree:'ليسانس',major:'شيمي',safSetad:'ستاد'},
            {id:'962',name:'فرهاد قاصد',unit:'توليد فلزي',degree:'ليسانس',major:'مديريت بازرگاني',safSetad:'ستاد'},
            {id:'973',name:'ايمان تعميري اهوازي',unit:'توليدغيرفلزي',degree:'فوق ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'975',name:'بهرام خسروي',unit:'معاونت بازرگاني',degree:'فوق ليسانس',major:'مديريت کسب و کار',safSetad:'ستاد'},
            {id:'994',name:'هادي عباسي',unit:'کيفيت',degree:'ليسانس',major:'متالوژي',safSetad:'ستاد'},
            {id:'999',name:'مهدي کيان',unit:'مهندسي فرايند',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'1008',name:'مهدي محمودي',unit:'بازاريابي و فروش',degree:'ليسانس',major:'مديريت بازرگاني',safSetad:'ستاد'},
            {id:'1015',name:'هادي بندلي زاده',unit:'حراست',degree:'ديپلم',major:'علوم تجربي',safSetad:'ستاد'},
            {id:'1016',name:'ابراهيم جباري',unit:'حراست',degree:'ليسانس',major:'حريق و حوادث',safSetad:'ستاد'},
            {id:'1023',name:'علي جنان فر',unit:'اداري',degree:'سوم دبيرستان',major:'برق',safSetad:'ستاد'},
            {id:'1026',name:'غلامرضا محسني',unit:'حراست',degree:'ديپلم',major:'فرهنگ وادب',safSetad:'ستاد'},
            {id:'1058',name:'منصور ايراني بجندي',unit:'توليدغيرفلزي',degree:'ليسانس',major:'شيمي',safSetad:'ستاد'},
            {id:'1065',name:'حسن حميدي پيله رود',unit:'نگهداري و تعميرات',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'1081',name:'احمد رحيمي سقرلو',unit:'حراست',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'1095',name:'اكبر درمانلو',unit:'نگهداري و تعميرات',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'1136',name:'سيدحميدرضا موسوي نژاد',unit:'نگهداري و تعميرات',degree:'فوق ليسانس',major:'علوم ارتباطات',safSetad:'ستاد'},
            {id:'1150',name:'داود زند',unit:'حراست',degree:'فوق ديپلم',major:'جوشکاري',safSetad:'ستاد'},
            {id:'1183',name:'حميدرضا حسنخاني فراهاني',unit:'حراست',degree:'ديپلم',major:'رياضي و فيزيك',safSetad:'ستاد'},
            {id:'1209',name:'اسمعيل سلطاني',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'روابط عمومي',safSetad:'ستاد'},
            {id:'1221',name:'امير بهزاداوخساري',unit:'مديريت عامل',degree:'ليسانس',major:'حقوق',safSetad:'ستاد'},
            {id:'1269',name:'علي اصغر قرباني خمسهء',unit:'حراست',degree:'ديپلم',major:'علوم تجربي',safSetad:'ستاد'},
            {id:'1306',name:'انور خدادادي قراقيه',unit:'حراست',degree:'فوق ديپلم',major:'تکنولوژي توليدات گياهي',safSetad:'ستاد'},
            {id:'1321',name:'سيدابن يامين ميرزكي',unit:'مهندسي فرايند',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'1346',name:'علي روستائي',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'ايمني، سلامت و محيط زيست',safSetad:'ستاد'},
            {id:'1348',name:'اكبر مقدمي مونقي',unit:'حراست',degree:'ليسانس',major:'امداد و سوانح',safSetad:'ستاد'},
            {id:'1374',name:'حسين حيدري پور',unit:'حراست',degree:'فوق ديپلم',major:'بازاريابي',safSetad:'ستاد'},
            {id:'1393',name:'عباس محمدزماني',unit:'نگهداري و تعميرات',degree:'ديپلم',major:'علوم انساني',safSetad:'ستاد'},
            {id:'1394',name:'سيدمصطفي عظيمي',unit:'مديريت عامل',degree:'ليسانس',major:'توليدات دامي',safSetad:'ستاد'},
            {id:'1404',name:'سيده محبوبه سيدمومني',unit:'معاونت بازرگاني',degree:'ديپلم',major:'علوم انساني',safSetad:'ستاد'},
            {id:'1407',name:'سميه ذوالفقاري دورباش',unit:'اداري و توسعه منابع انساني',degree:'فوق ديپلم',major:'بازرگاني',safSetad:'ستاد'},
            {id:'1422',name:'محسن لطفي جاويد',unit:'طرح و برنامه',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'1426',name:'حسينعلي صادقي',unit:'برنامه ريزي',degree:'ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'1439',name:'محمود دهقاني',unit:'اداري و توسعه منابع انساني',degree:' اول راهنمايي',major:'____',safSetad:'ستاد'},
            {id:'1483',name:'مهدي شاکري',unit:'حراست',degree:'ديپلم',major:'نقشه كشي ساختمان معماري',safSetad:'ستاد'},
            {id:'1500',name:'ثمره شفيعي مويد',unit:'مديريت عامل',degree:'ديپلم',major:'علوم تجربي',safSetad:'ستاد'},
            {id:'1508',name:'مسعود اصغرپور',unit:'مونتاژمحصول',degree:'ليسانس',major:'مكانيك',safSetad:'ستاد'},
            {id:'1513',name:'بابک عظيم لوي شانجاني',unit:'کيفيت',degree:'فوق ليسانس',major:'علوم اجتماعي',safSetad:'ستاد'},
            {id:'1534',name:'فاطمه شريف طهراني',unit:'کيفيت',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'1542',name:'محسن شکوه بابائي',unit:'تحقيق وتوسعه وطراحي محصول',degree:'ليسانس',major:'مهندسي نساجي',safSetad:'ستاد'},
            {id:'1547',name:'علي گودرزتله جردي',unit:'حراست',degree:'فوق ليسانس',major:'پژوهشگري امنيت',safSetad:'ستاد'},
            {id:'1549',name:'بهمن بمپوري',unit:'حراست',degree:'ديپلم',major:'علوم انساني',safSetad:'ستاد'},
            {id:'1560',name:'حميدرضا وزيري نيا',unit:'طرح و برنامه',degree:'ليسانس',major:'سخت افزار کامپيوتر',safSetad:'ستاد'},
            {id:'1578',name:'مهدي فلاح',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'بهداشت حرفه اي',safSetad:'ستاد'},
            {id:'1612',name:'مهدي قنبري نودهي',unit:'حراست',degree:'ديپلم',major:'راه و ساختمان',safSetad:'ستاد'},
            {id:'1623',name:'عليرضا اميري پور',unit:'نگهداري و تعميرات',degree:'ليسانس',major:'مهندسي فناوري مکانيک خودرو',safSetad:'ستاد'},
            {id:'1637',name:'احمد محمدي نصر آباد',unit:'نگهداري و تعميرات',degree:'ليسانس',major:'مهندسي فناوري الکترونيک صنعتي',safSetad:'ستاد'},
            {id:'1659',name:'علي رضائي',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'1680',name:'عباس افضلي',unit:'معاونت بازرگاني',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'1683',name:'حسن سليماني کليشمي',unit:'مهندسي توليد',degree:'ليسانس',major:'مهندسي تکنولوژي الکترونيک',safSetad:'ستاد'},
            {id:'1694',name:'رضا حسني طراوت',unit:'تحقيق وتوسعه وطراحي محصول',degree:'ليسانس',major:'نقشه کشي صنعتي',safSetad:'ستاد'},
            {id:'1705',name:'سيداصغر علي بابائي',unit:'حراست',degree:'ديپلم',major:'علوم تجربي',safSetad:'ستاد'},
            {id:'1719',name:'هاشم تيموري',unit:'اداري و توسعه منابع انساني',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'1751',name:'سيدحسن سخي جوارشک',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'1753',name:'محمدعلي والي نژاد',unit:'معاونت بازرگاني',degree:'ليسانس',major:'مديريت بازرگاني',safSetad:'ستاد'},
            {id:'1758',name:'حسين منصوري',unit:'مالي واقتصادي',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'1762',name:'کامران حق شناس',unit:'توليدغيرفلزي',degree:'ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'1769',name:'بابك صابري',unit:'مهندسي فرايند',degree:'ليسانس',major:'مهندسي تکنولوژي الکترونيک',safSetad:'ستاد'},
            {id:'1771',name:'مجيد صمدبين',unit:'حراست',degree:'ديپلم',major:'کامپيوتر',safSetad:'ستاد'},
            {id:'1773',name:'محمدمهدي يزدي',unit:'برنامه ريزي',degree:'فوق ليسانس',major:'مديريت اجرايي',safSetad:'ستاد'},
            {id:'1787',name:'سيدمجيد جوادي دوگاهه',unit:'مهندسي فرايند',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'1799',name:'بابک کباري',unit:'معاونت بازرگاني',degree:'ليسانس',major:'دبيري زبان انگليسي',safSetad:'ستاد'},
            {id:'1809',name:'علي رعيت',unit:'مونتاژمحصول',degree:'ليسانس',major:'زبان و ادبيات فارسي',safSetad:'ستاد'},
            {id:'1862',name:'ناصر جباري',unit:'مونتاژمحصول',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'1866',name:'شادي جمشيدي',unit:'برنامه ريزي',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'1879',name:'مسعود برزا',unit:'معاونت توليد',degree:'ليسانس',major:'مهندسي مکانيک',safSetad:'ستاد'},
            {id:'1909',name:'غلامعلي نوروزي',unit:'توليدغيرفلزي',degree:'ليسانس',major:'مديريت بازرگاني',safSetad:'ستاد'},
            {id:'1946',name:'عليرضا صادق زاده',unit:'حراست',degree:'ديپلم',major:'رياضي و فيزيك',safSetad:'ستاد'},
            {id:'2114',name:'مهدي قهرماني',unit:'حراست',degree:'ديپلم',major:'مكانيك',safSetad:'ستاد'},
            {id:'2154',name:'مهدي نقوي',unit:'نگهداري و تعميرات',degree:'ديپلم',major:'الكتروتكنيك',safSetad:'ستاد'},
            {id:'2189',name:'محمد نعمتي لفجماني',unit:'توليد فلزي',degree:'ليسانس',major:'حقوق قضايي',safSetad:'ستاد'},
            {id:'2226',name:'سپيده سبزواري',unit:'نگهداري و تعميرات',degree:'ديپلم',major:'رياضي و فيزيك',safSetad:'ستاد'},
            {id:'2244',name:'زهرا هادي هدش',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'مهندسي محيط زيست',safSetad:'ستاد'},
            {id:'2260',name:'روح اله سولقاني',unit:'حراست',degree:'ديپلم',major:'نقشه كشي ساختمان معماري',safSetad:'ستاد'},
            {id:'2293',name:'امين اسمعيلي',unit:'برنامه ريزي',degree:'فوق ليسانس',major:'مهندسي سيتمهاي اقتصادي - اجتماعي',safSetad:'ستاد'},
            {id:'2297',name:'ابوذر مهري پورازبرمي',unit:'حراست',degree:'ديپلم',major:'الكتروتكنيك',safSetad:'ستاد'},
            {id:'2302',name:'ندا ياوري',unit:'طرح و برنامه',degree:'ليسانس',major:'مهندسي کامپيوتر',safSetad:'ستاد'},
            {id:'2313',name:'حامده باحجاب',unit:'مديريت عامل',degree:'فوق ليسانس',major:'حقوق بين الملل',safSetad:'ستاد'},
            {id:'2316',name:'مونا گودرزي',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'2317',name:'علي جامعي',unit:'معاونت بازرگاني',degree:'فوق ليسانس',major:'مديريت اجرايي',safSetad:'ستاد'},
            {id:'2318',name:'سيدعلي حسيني مهر',unit:'حراست',degree:'فوق ليسانس',major:'مديريت بازرگاني',safSetad:'ستاد'},
            {id:'2335',name:'امير وحيدي',unit:'معاونت توليد',degree:'فوق ليسانس',major:'زبان و ادبيات فارسي',safSetad:'ستاد'},
            {id:'2338',name:'مصطفي اکبري',unit:'کيفيت',degree:'ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'2340',name:'عاطفه زواره زارع',unit:'مالي واقتصادي',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'2396',name:'محسن کوچکي پور',unit:'نگهداري و تعميرات',degree:'ليسانس',major:'برق',safSetad:'ستاد'},
            {id:'2397',name:'محمود شهاب حسين آبادي',unit:'مديريت عامل',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'2466',name:'حجت صبوري ماسوله',unit:'اداري و توسعه منابع انساني',degree:'چهارم ابتدايي',major:'____',safSetad:'ستاد'},
            {id:'2571',name:'ستاره ظهرابي',unit:'طرح و برنامه',degree:'ليسانس',major:'مديريت دولتي',safSetad:'ستاد'},
            {id:'2575',name:'منا عسکري',unit:'طرح و برنامه',degree:'ليسانس',major:'نرم افزارکامپيوتر',safSetad:'ستاد'},
            {id:'2579',name:'داود مقدمي',unit:'حراست',degree:'ليسانس',major:'فرهنگ وادب',safSetad:'ستاد'},
            {id:'2584',name:'ولي اله زاده خاطر',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'نرم افزارکامپيوتر',safSetad:'ستاد'},
            {id:'2591',name:'محمدرضا مجيدي',unit:'مالي واقتصادي',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'2596',name:'عيسي کريمي کلايه',unit:'توليد فلزي',degree:'ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'2618',name:'آرش جمشيدي دانا',unit:'حراست',degree:'ديپلم',major:'نقشه كشي ساختمان معماري',safSetad:'ستاد'},
            {id:'2619',name:'حسين خوشه سپهر',unit:'برنامه ريزي',degree:'فوق ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'2625',name:'مهدي مقيمي',unit:'حراست',degree:'فوق ديپلم',major:'حسابداري',safSetad:'ستاد'},
            {id:'2637',name:'مهدي جان نثاري',unit:'اداري و توسعه منابع انساني',degree:'پنجم ابتدايي',major:'____',safSetad:'ستاد'},
            {id:'2638',name:'مهدي مهدوي',unit:'کيفيت',degree:'ليسانس',major:'شيمي نساجي',safSetad:'ستاد'},
            {id:'2642',name:'عليرضا ذکيا',unit:'نگهداري و تعميرات',degree:'سوم راهنمايي',major:'____',safSetad:'ستاد'},
            {id:'2644',name:'سيدامين مفضلي',unit:'طرح و برنامه',degree:'ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'2650',name:'محمدمهدي اعرابي',unit:'حراست',degree:'ليسانس',major:'علوم اجتماعي',safSetad:'ستاد'},
            {id:'2670',name:'مهرداد ذوالفقاري',unit:'اداري و توسعه منابع انساني',degree:'ديپلم',major:'تاسيسات',safSetad:'ستاد'},
            {id:'2679',name:'حسين نکويي مطلق',unit:'حراست',degree:'ديپلم',major:'تاسيسات',safSetad:'ستاد'},
            {id:'2701',name:'فاطمه رمضاني',unit:'طرح و برنامه',degree:'فوق ليسانس',major:'مديريت فناوري اطلاعات',safSetad:'ستاد'},
            {id:'2705',name:'محمدمهدي پورشيخعلي',unit:'حراست',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'2762',name:'يوسف ميارعباس کياني',unit:'توليد فلزي',degree:'فوق ليسانس',major:'مديريت دولتي',safSetad:'ستاد'},
            {id:'2763',name:'مهتاب بي رنگي اصل',unit:'اداري و توسعه منابع انساني',degree:'فوق ديپلم',major:'حسابداري',safSetad:'ستاد'},
            {id:'2765',name:'حسن خسروي',unit:'حراست',degree:'ديپلم',major:'کاربردکامپيوتر',safSetad:'ستاد'},
            {id:'2787',name:'سهيل مدبري',unit:'کيفيت',degree:'فوق ليسانس',major:'گرايش صنعت خودرو  MBA',safSetad:'ستاد'},
            {id:'2793',name:'مهدي ملکي',unit:'طرح و برنامه',degree:'فوق ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'2806',name:'عسل فرزان',unit:'مالي واقتصادي',degree:'فوق ليسانس',major:'مديريت مالي',safSetad:'ستاد'},
            {id:'2810',name:'صادق فرج نيا',unit:'مهندسي توليد',degree:'ليسانس',major:'مهندسي مواد متالوژي',safSetad:'ستاد'},
            {id:'2814',name:'مسعود جعفري',unit:'حراست',degree:'ديپلم',major:'تعمير موتورخودرو',safSetad:'ستاد'},
            {id:'2851',name:'محمد گودرزي',unit:'مهندسي توليد',degree:'ليسانس',major:'ساخت و توليد',safSetad:'ستاد'},
            {id:'2858',name:'مهدي بيات قشلاقي',unit:'کيفيت',degree:'ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'2862',name:'عباس چيت سازبروجردي',unit:'معاونت بازرگاني',degree:'ليسانس',major:'مهندسي مکانيک',safSetad:'ستاد'},
            {id:'2863',name:'معصومه نوري زاده',unit:'مالي واقتصادي',degree:'فوق ليسانس',major:'مديريت مالي',safSetad:'ستاد'},
            {id:'2884',name:'سيدمحمدحسين سيدغفوري',unit:'مديريت عامل',degree:'دانشجوي ليسانس',major:'علوم حوزوي',safSetad:'ستاد'},
            {id:'2888',name:'سيدمحمد ميري',unit:'اداري و توسعه منابع انساني',degree:'دكتري',major:'پزشک عمومي',safSetad:'ستاد'},
            {id:'2891',name:'فاطمه ميثمي',unit:'طرح و برنامه',degree:'ليسانس',major:'کامپيوتر',safSetad:'ستاد'},
            {id:'2895',name:'بهنام دستگاه',unit:'حراست',degree:'ديپلم',major:'atomecanic',safSetad:'ستاد'},
            {id:'2904',name:'مهناز رياضي',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'بهداشت',safSetad:'ستاد'},
            {id:'2922',name:'محمودرضا تيرسرائي',unit:'مالي واقتصادي',degree:'فوق ليسانس',major:'مديريت مالي',safSetad:'ستاد'},
            {id:'2928',name:'فرج اله حاتمي',unit:'مهندسي فرايند',degree:'ليسانس',major:'مهندسي کشاورزي',safSetad:'ستاد'},
            {id:'2932',name:'علي اکبر نعيمي',unit:'اداري و توسعه منابع انساني',degree:'فوق ديپلم',major:'حسابداري',safSetad:'ستاد'},
            {id:'2933',name:'رضا سلطاني واحد',unit:'مهندسي فرايند',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'2940',name:'امير رفيعي فروشاني',unit:'معاونت بازرگاني',degree:'ليسانس',major:'مهندسي مکانيک',safSetad:'ستاد'},
            {id:'2944',name:'حميدرضا زنگي',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'مديريت دولتي',safSetad:'ستاد'},
            {id:'2950',name:'مهدي علي خاني',unit:'مالي واقتصادي',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'2951',name:'سيده ياسمن ميرزکي',unit:'مالي واقتصادي',degree:'فوق ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'2960',name:'سيدعلي حسيني',unit:'مالي واقتصادي',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'2965',name:'حامد حسن زاده',unit:'مالي واقتصادي',degree:'ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'2967',name:'هادي افتخاري',unit:'مهندسي فرايند',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'2979',name:'سعيد حقيقي',unit:'مالي واقتصادي',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'2999',name:'هادي آزادپناه',unit:'مالي واقتصادي',degree:'ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'3002',name:'زهرا وکيلي',unit:'طرح و برنامه',degree:'ليسانس',major:'علوم اجتماعي',safSetad:'ستاد'},
            {id:'3007',name:'رضا محمدي نسب',unit:'حراست',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'3008',name:'محمد بهرامي',unit:'مديريت عامل',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'3010',name:'صابر ياري',unit:'حراست',degree:'ليسانس',major:'مديريت کسب و کار',safSetad:'ستاد'},
            {id:'3011',name:'زهرا اسماعيل نژاد',unit:'معاونت بازرگاني',degree:'فوق ليسانس',major:'مديريت کسب و کار',safSetad:'ستاد'},
            {id:'3012',name:'سميه خان محمدي',unit:'معاونت بازرگاني',degree:'ليسانس',major:'آب وهواشناسي',safSetad:'ستاد'},
            {id:'3013',name:'سمانه اميري',unit:'مديريت عامل',degree:'فوق ليسانس',major:'صنايع دستي',safSetad:'ستاد'},
            {id:'3017',name:'مهدي ايزدي',unit:'حراست',degree:'ليسانس',major:'حفاظت و پيشگيري از حريق و حوادث',safSetad:'ستاد'},
            {id:'3023',name:'مهدي حميدوند',unit:'کيفيت',degree:'ليسانس',major:'مهندسي مکانيک',safSetad:'ستاد'},
            {id:'3025',name:'محسن سهيلي',unit:'حراست',degree:'ليسانس',major:'ایمنی صنعتی',safSetad:'ستاد'},
            {id:'3101',name:'مصطفي عليش پور',unit:'مديريت عامل',degree:'ليسانس',major:'بازرگاني',safSetad:'ستاد'},
            {id:'3106',name:'نازنين فتحي سپرداني',unit:'معاونت بازرگاني',degree:'ليسانس',major:'زيست شناسي',safSetad:'ستاد'},
            {id:'3118',name:'سيده مينا دژوند',unit:'حراست',degree:'فوق ديپلم',major:'مديريت کسب و کار',safSetad:'ستاد'},
            {id:'3122',name:'زهرا مجنون',unit:'مالي واقتصادي',degree:'ديپلم',major:'ادبيات وعلوم انساني',safSetad:'ستاد'},
            {id:'3123',name:'بهروز فارسي عباس آبادي',unit:'معاونت بازرگاني',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'3127',name:'سيمين اشتياقي',unit:'مديريت عامل',degree:'ليسانس',major:'مديريت دولتي',safSetad:'ستاد'},
            {id:'3133',name:'امين بيات',unit:'معاونت بازرگاني',degree:'فوق ليسانس',major:'بازرگاني',safSetad:'ستاد'},
            {id:'3135',name:'سعيد قانع',unit:'کيفيت',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'3161',name:'کيوان کريم دخت ملومه',unit:'مالي واقتصادي',degree:'فوق ليسانس',major:'مديريت اجرايي',safSetad:'ستاد'},
            {id:'3185',name:'نگين شهبازي',unit:'کيفيت',degree:'ليسانس',major:'مهندسي کشاورزي',safSetad:'ستاد'},
            {id:'3192',name:'سجاد ميردارشاه حسيني',unit:'طرح و برنامه',degree:'ليسانس',major:'کامپيوتر',safSetad:'ستاد'},
            {id:'3211',name:'اعظم سيويلي',unit:'طرح و برنامه',degree:'فوق ديپلم',major:'نقشه کشي صنعتي',safSetad:'ستاد'},
            {id:'3267',name:'جهانبخش گودرزي',unit:'طرح و برنامه',degree:'ليسانس',major:'نرم افزارکامپيوتر',safSetad:'ستاد'},
            {id:'3269',name:'فاطمه عباسي',unit:'طرح و برنامه',degree:'ليسانس',major:'مهندسي فناوري اطلاعات',safSetad:'ستاد'},
            {id:'3296',name:'اميرحسين سالم دهقاني',unit:'مديريت عامل',degree:'فوق ديپلم',major:'مديريت کسب و کار',safSetad:'ستاد'},
            {id:'3302',name:'سيدحامد هاشمي',unit:'معاونت بازرگاني',degree:'ليسانس',major:'مديريت تبليغات تجاري',safSetad:'ستاد'},
            {id:'3306',name:'محمد محمدي',unit:'اداري و توسعه منابع انساني',degree:'پيش دانشگاهي',major:'علوم انساني',safSetad:'ستاد'},
            {id:'3316',name:'سميرا نظري',unit:'مالي واقتصادي',degree:'ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'3318',name:'عليرضا شيرين پور هفتخواني',unit:'حراست',degree:'ديپلم',major:'حسابداري',safSetad:'ستاد'},
            {id:'3322',name:'سيداميررضا رضائي',unit:'مهندسي فرايند',degree:'ليسانس',major:'مهندسي مکانيک',safSetad:'ستاد'},
            {id:'3326',name:'صديقه شاه ولي کوه شوري',unit:'معاونت بازرگاني',degree:'فوق ليسانس',major:'علوم طيور',safSetad:'ستاد'},
            {id:'3355',name:'علي حسيني علائي',unit:'حراست',degree:'فوق ديپلم',major:'فرهنگ وادب',safSetad:'ستاد'},
            {id:'3358',name:'مجيد محمدکريمي',unit:'حراست',degree:'ديپلم',major:'رياضي و فيزيك',safSetad:'ستاد'},
            {id:'3364',name:'علي حسين رحيمي مراشي',unit:'حراست',degree:'ديپلم',major:'کاردانش',safSetad:'ستاد'},
            {id:'3394',name:'ميلاد گودرزي مجد',unit:'حراست',degree:'ديپلم',major:'علوم تجربي',safSetad:'ستاد'},
            {id:'3396',name:'عباس عباسي',unit:'حراست',degree:'ديپلم',major:'ساخت و توليد',safSetad:'ستاد'},
            {id:'3397',name:'محمدامين مهرابي',unit:'حراست',degree:'پيش دانشگاهي',major:'علوم تجربي',safSetad:'ستاد'},
            {id:'3398',name:'سعيد زاغري',unit:'حراست',degree:'پيش دانشگاهي',major:'علوم تجربي',safSetad:'ستاد'},
            {id:'3401',name:'بنيامين حاجي عباسي',unit:'حراست',degree:'ديپلم',major:'ادبيات وعلوم انساني',safSetad:'ستاد'},
            {id:'3402',name:'محمدحسين آردي',unit:'حراست',degree:'فوق ديپلم',major:'کامپيوتر',safSetad:'ستاد'},
            {id:'3404',name:'سينا حاجي محمداميني',unit:'اداري و توسعه منابع انساني',degree:'ليسانس',major:'روانشناسي عمومي',safSetad:'ستاد'},
            {id:'3406',name:'وحيد نوري طهرابند',unit:'حراست',degree:'ديپلم',major:'علوم تجربي',safSetad:'ستاد'},
            {id:'3407',name:'جواد بابيزان',unit:'حراست',degree:'فوق ديپلم',major:'نقشه کشي صنعتي',safSetad:'ستاد'},
            {id:'3413',name:'حسين بشارتي',unit:'حراست',degree:'ليسانس',major:'مهندسي فناوري اطلاعات',safSetad:'ستاد'},
            {id:'3422',name:'عليرضا سليماني',unit:'حراست',degree:'ديپلم',major:'کامپيوتر',safSetad:'ستاد'},
            {id:'3428',name:'محمدرضا مهراني',unit:'حراست',degree:'فوق ديپلم',major:'حسابداري',safSetad:'ستاد'},
            {id:'3435',name:'محمدرضا وفائي روزبهاني',unit:'نگهداري و تعميرات',degree:'ديپلم',major:'الكتروتكنيك',safSetad:'ستاد'},
            {id:'3451',name:'عليرضا نيک پور',unit:'حراست',degree:'فوق ديپلم',major:'سخت افزار کامپيوتر',safSetad:'ستاد'},
            {id:'3452',name:'پژمان طاعتي',unit:'معاونت بازرگاني',degree:'فوق ليسانس',major:'مديريت بازرگاني',safSetad:'ستاد'},
            {id:'3458',name:'عليرضا ملکي',unit:'طرح و برنامه',degree:'ليسانس',major:'نرم افزارکامپيوتر',safSetad:'ستاد'},
            {id:'3466',name:'حسن اسدي',unit:'حراست',degree:'ديپلم',major:'تعمير موتورخودرو',safSetad:'ستاد'},
            {id:'3467',name:'عيوض فروزنده قوجه بيگلو',unit:'حراست',degree:'ليسانس',major:'علوم ورزشي',safSetad:'ستاد'},
            {id:'3474',name:'اميررضا امين ياور',unit:'حراست',degree:'ليسانس',major:'معارف اسلامي',safSetad:'ستاد'},
            {id:'3475',name:'سعيد مهدي نژاد',unit:'مالي واقتصادي',degree:'ليسانس',major:'نرم افزارکامپيوتر',safSetad:'ستاد'},
            {id:'3477',name:'علي علي زاده دولت آباد',unit:'اداري و توسعه منابع انساني',degree:'فوق ليسانس',major:'مديريت آموزشي',safSetad:'ستاد'},
            {id:'3478',name:'علي کيان مهر',unit:'توليد فلزي',degree:'سوم راهنمايي',major:'____',safSetad:'ستاد'},
            {id:'3497',name:'زينب محزون فتمه سري',unit:'مالي واقتصادي',degree:'ديپلم',major:'کامپيوتر',safSetad:'ستاد'},
            {id:'3502',name:'هادي حياتي',unit:'اداري و توسعه منابع انساني',degree:'پنجم ابتدايي',major:'____',safSetad:'ستاد'},
            {id:'3505',name:'ميلاد خيرخواه ثابت قدم',unit:'اداري و توسعه منابع انساني',degree:'ديپلم',major:'کامپيوتر',safSetad:'ستاد'},
            {id:'3509',name:'بهزاد توکلي',unit:'حراست',degree:'ديپلم',major:'تعمير موتورخودرو',safSetad:'ستاد'},
            {id:'3520',name:'حميد دهقاني',unit:'مهندسي فرايند',degree:'ليسانس',major:'مهندسي برق',safSetad:'ستاد'},
            {id:'3521',name:'ميترا قرباني',unit:'مهندسي فرايند',degree:'فوق ليسانس',major:'مهندسي برق',safSetad:'ستاد'},
            {id:'3527',name:'صادق صمدي',unit:'معاونت بازرگاني',degree:'فوق ديپلم',major:'بازاريابي',safSetad:'ستاد'},
            {id:'3537',name:'بهنام زهره وند',unit:'مالي واقتصادي',degree:'ليسانس',major:'حسابداري',safSetad:'ستاد'},
            {id:'3538',name:'شهريار حمداني',unit:'مالي واقتصادي',degree:'ليسانس',major:'تربيت بدني',safSetad:'ستاد'},
            {id:'3542',name:'رسول شريفي نيا',unit:'حراست',degree:'ديپلم',major:'تعمير موتورخودرو',safSetad:'ستاد'},
            {id:'3548',name:'امير رحماني',unit:'حراست',degree:'ليسانس',major:'مديريت بازرگاني',safSetad:'ستاد'},
            {id:'3550',name:'غلام رضا عبداله خاني',unit:'حراست',degree:'فوق ليسانس',major:'نرم افزارکامپيوتر',safSetad:'ستاد'},
            {id:'3552',name:'گلفام مسعودي',unit:'معاونت بازرگاني',degree:'فوق ليسانس',major:'زبان',safSetad:'ستاد'},
            {id:'3553',name:'پدرام بهرودي',unit:'اداري و توسعه منابع انساني',degree:'فوق ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'3554',name:'محسن نبي نيا',unit:'کيفيت',degree:'ليسانس',major:'مهندسي شيمي',safSetad:'صف'},
            {id:'3555',name:'فريبا محمدي راد',unit:'طرح و برنامه',degree:'ليسانس',major:'زمين شناسي',safSetad:'ستاد'},
            {id:'3556',name:'بهزاد شکري',unit:'مديريت عامل',degree:'فوق ليسانس',major:'مديريت دولتي',safSetad:'ستاد'},
            {id:'3557',name:'رضا شعباني ورکي',unit:'معاونت بازرگاني',degree:'فوق ديپلم',major:'روابط عمومي',safSetad:'ستاد'},
            {id:'3558',name:'سيدحسن نصيري',unit:'مديريت عامل',degree:'فوق ليسانس',major:'مهندسي صنايع',safSetad:'ستاد'},
            {id:'3561',name:'رضا بخشش طلب مرکيه',unit:'حراست',degree:'ديپلم',major:'الکترونيک',safSetad:'ستاد'},
            {id:'3562',name:'عليرضا خدابنده',unit:'حراست',degree:'سيكل',major:'____',safSetad:'ستاد'},
            {id:'3563',name:'امير شکرخند',unit:'مالي واقتصادي',degree:'فوق ليسانس',major:'مديريت صنعتي',safSetad:'ستاد'},
            {id:'-',name:'سیروس نصیری',unit:'مديريت عامل',degree:'____',major:'____',safSetad:'ستاد'},
            {id:'-',name:'محمدجواد طاهری محمودی',unit:'اداري و توسعه منابع انساني',degree:'دكتري',major:'پزشک عمومي',safSetad:'ستاد'},
            {id:'-',name:'مسعود مصباح',unit:'اداري و توسعه منابع انساني',degree:'دكتري',major:'پزشک عمومي',safSetad:'ستاد'},
            {id:'-',name:'میرفلاح دهقان نژاد',unit:'مالي واقتصادي',degree:'____',major:'____',safSetad:'ستاد'}
        ];

        // Gender Logic
        function getGender(name) {
            const femaleNames = ['فاطمه', 'زهرا', 'مریم', 'سمیه', 'بهناز', 'سمانه', 'ندا', 'ستاره', 'غزاله', 'فریبا', 'مهتاب', 'عسل', 'شادی', 'منی', 'محدثه', 'نگین', 'صدیقه', 'عاطفه', 'اکرم', 'پری', 'پریسا', 'معصومه', 'میترا', 'الهام'];
            const firstName = name.split(' ')[0];
            if(femaleNames.includes(firstName)) return 'زن';
            // Fallback for compound names like "سیده ..."
            if(name.includes('خانم') || name.includes('فاطمه') || name.includes('زهرا')) return 'زن';
            return 'مرد';
        }
        setadPersonnel.forEach(p => p.gender = getGender(p.name));

        // 2. Aggregates for Charts
        const majorData = {
            'کاردانش': 142, 'علوم انسانی': 50, 'حسابداری': 44, 'علوم تجربی': 39,
            'گرافیک کامپیوتر': 38, 'ریاضی و فیزیک': 30, 'ادبیات': 29, 'کامپیوتر': 27,
            'برق صنعتی': 20, 'مدیریت بازرگانی': 18, 
            'مهندسی مکانیک': 24, 'مهندسی عمران': 7, 
            'سایر': 540
        };
        const eduData = {'دیپلم': 500, 'لیسانس': 218, 'فوق دیپلم': 92, 'زیر دیپلم': 97, 'فوق لیسانس': 53, 'دکتری': 1};

        // 3. Retiree Data (Updated with Real Large Numbers)
        const retiredList = [
            {id:860, name:'زارعي زهرا', date:'1402/12/26', amount:1999910000, type:'بازنشستگی عادی'},
            {id:514, name:'فيض اله پور اسلام', date:'1402/12/26', amount:22781797, type:'بازنشستگی عادی'},
            {id:1151, name:'علي كرمي عباس', date:'1402/12/29', amount:258625475, type:'بازنشستگی سخت و زیان آور'},
            {id:1248, name:'ميداني حميدرضا', date:'1402/12/29', amount:211567746, type:'بازنشستگی سخت و زیان آور'},
            {id:1070, name:'بناساز دليلي عباس', date:'1402/12/29', amount:158764649, type:'بازنشستگی سخت و زیان آور'},
            {id:1325, name:'دشتي ابربكوه محمد', date:'1402/12/29', amount:75646974, type:'بازنشستگی سخت و زیان آور'},
            {id:2609, name:'سراباداني تفرشي سعيد', date:'1403/10/01', amount:657829772, type:'بازنشستگی سخت و زیان آور'},
            {id:236, name:'بخشي محمد رضا', date:'1403/12/29', amount:14642682927, type:'بازنشستگی سخت و زیان آور'},
            {id:608, name:'امير حسني محمود', date:'1403/12/29', amount:13338358790, type:'بازنشستگی عادی'},
            {id:802, name:'اميري زين العابدين', date:'1403/12/29', amount:10167820565, type:'بازنشستگی سخت و زیان آور'},
            {id:1543, name:'ضياء حميده', date:'1403/12/29', amount:9642040791, type:'بازنشستگی عادی'},
            {id:855, name:'رفيعي منصور', date:'1403/12/29', amount:9350718945, type:'بازنشستگی عادی'},
            {id:773, name:'سعادت اركان نجد محمد', date:'1403/12/29', amount:6927400364, type:'بازنشستگی عادی'},
            {id:981, name:'كردي ابوالفضل', date:'1403/12/29', amount:6500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:983, name:'ميرزائي حسين', date:'1403/12/29', amount:6287894068, type:'بازنشستگی سخت و زیان آور'},
            {id:751, name:'ناخداگلي احمد', date:'1403/12/29', amount:6000000000, type:'بازنشستگی سخت و زیان آور'},
            {id:419, name:'تركميان عليرضا', date:'1403/12/29', amount:5500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1933, name:'ابراهيمي زهرا', date:'1403/12/29', amount:4938791668, type:'بازنشستگی عادی'},
            {id:1428, name:'عليپور محمد', date:'1403/12/29', amount:4592771290, type:'بازنشستگی سخت و زیان آور'},
            {id:1403, name:'سلطاني يعقوب', date:'1403/12/29', amount:4588860129, type:'بازنشستگی سخت و زیان آور'},
            {id:856, name:'باقري محمدرضا', date:'1403/12/29', amount:4500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1336, name:'مصطفي لو حجت اله', date:'1403/12/29', amount:4335147612, type:'بازنشستگی سخت و زیان آور'},
            {id:1178, name:'مزرعه سفيدي اكبر', date:'1403/12/29', amount:4066824540, type:'بازنشستگی سخت و زیان آور'},
            {id:1657, name:'ملك پور اكبر', date:'1403/12/29', amount:3969162083, type:'بازنشستگی سخت و زیان آور'},
            {id:1435, name:'حامديان كاظم', date:'1403/12/29', amount:3879498369, type:'بازنشستگی سخت و زیان آور'},
            {id:1655, name:'فعال حسن', date:'1403/12/29', amount:3665850013, type:'بازنشستگی سخت و زیان آور'},
            {id:2920, name:'مير حسيني سرشکه سيد کريم', date:'1403/12/29', amount:3562433034, type:'بازنشستگی عادی'},
            {id:1107, name:'بابائي رضا', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1126, name:'متقي صمد', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1155, name:'شيرعليزاده محمود', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1159, name:'ملاميرزائي حسين', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1160, name:'فرهادي بابازيدي رسول', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1174, name:'فرج الهي عليرضا', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1190, name:'بردبار فرامرز', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1194, name:'پيريان عباس', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1206, name:'صلاحي محمدرضا', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1211, name:'گلپايگاني داود', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1240, name:'كاظمي رسول', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1257, name:'ژاله مايوان محمود', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1259, name:'بلوبين داود', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1390, name:'اصغري تمامي علي', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1516, name:'سرز عيم علي', date:'1403/12/29', amount:3500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1362, name:'سهرابي سودمند اكبر', date:'1403/12/29', amount:3292986303, type:'بازنشستگی سخت و زیان آور'},
            {id:1305, name:'نيكخو گورابزرمخي مسعود', date:'1403/12/29', amount:3191084841, type:'بازنشستگی سخت و زیان آور'},
            {id:1593, name:'سليمي نژاد حميد', date:'1403/12/29', amount:3067286212, type:'بازنشستگی سخت و زیان آور'},
            {id:1355, name:'سالاري حسن', date:'1403/12/29', amount:3000000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1239, name:'شاهسوار عليرضا', date:'1403/12/29', amount:2972423936, type:'بازنشستگی سخت و زیان آور'},
            {id:1066, name:'سهيلي مهدي', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1068, name:'خجير ملومه علي', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1072, name:'محمدي اقدم فرشيد', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1140, name:'باباخاني محسن', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1164, name:'بياباني گل تپه عباس', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1166, name:'احمد زاده داود', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1168, name:'ثروتي مهدي', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1196, name:'نعمتي ابوالفضل', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1203, name:'صالحي داود', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1208, name:'مرداني يونس', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1220, name:'غمخواري سيد جلال', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1261, name:'عنايتي علي اصغر', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1262, name:'ايوبي علي', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1264, name:'رنجبري كاظم', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1267, name:'رسولي تبار محمد', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1324, name:'اسدي حسن', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1333, name:'پرماه داود', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1357, name:'حاجيلو فرهاد', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1424, name:'شجاعي شوراب مهدي', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1436, name:'رنجبربورخيلي حامد', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1448, name:'مقيمي خيرآبادي رضا', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1587, name:'ملامحمد نوري منوچهر', date:'1403/12/29', amount:2800000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1701, name:'نبي پور حسن', date:'1403/12/29', amount:2746324349, type:'بازنشستگی سخت و زیان آور'},
            {id:1958, name:'اميني گيلاونداني محمد قاسم', date:'1403/12/29', amount:2708059195, type:'بازنشستگی سخت و زیان آور'},
            {id:1597, name:'دهقاني عباس', date:'1403/12/29', amount:2614951597, type:'بازنشستگی سخت و زیان آور'},
            {id:1230, name:'سائي نژاد مهران', date:'1403/12/29', amount:2500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1594, name:'محمدي احمد', date:'1403/12/29', amount:2500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1453, name:'احمدي درمني بهروز', date:'1403/12/29', amount:2300000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1494, name:'ميرزاآقا علي اكبر', date:'1403/12/29', amount:2200000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1090, name:'اسماعيل زاده همداني رضا', date:'1403/12/29', amount:2051041667, type:'بازنشستگی سخت و زیان آور'},
            {id:1224, name:'جليلي سيد فرهاد', date:'1403/12/29', amount:2000000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1667, name:'لشگري رضا', date:'1403/12/29', amount:2000000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1198, name:'حاجي آقائي ابراهيم', date:'1403/12/29', amount:1980684568, type:'بازنشستگی سخت و زیان آور'},
            {id:1619, name:'كمال پور هادي', date:'1403/12/29', amount:1806961361, type:'بازنشستگی عادی'},
            {id:1906, name:'فارغ راجيري علي اصغر', date:'1403/12/29', amount:1783344895, type:'بازنشستگی سخت و زیان آور'},
            {id:1562, name:'برجي قاسم', date:'1403/12/29', amount:1500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1120, name:'ورزنده مجيد', date:'1403/12/29', amount:500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:1125, name:'يوسفي آق باش عادل', date:'1403/12/29', amount:500000000, type:'بازنشستگی سخت و زیان آور'},
            {id:613, name:'سرابي مهرداد', date:'1404/06/26', amount:23531906922, type:'بازنشستگی عادی'},
            {id:404, name:'فيروزي فريدون', date:'1404/06/26', amount:21673776631, type:'بازنشستگی عادی'},
            {id:529, name:'پورشفيعي ماسوله منصور', date:'1404/06/26', amount:21090552601, type:'بازنشستگی عادی'},
            {id:554, name:'ملكلو سعيد', date:'1404/06/26', amount:18320478814, type:'بازنشستگی عادی'},
            {id:2403, name:'باباخاني قاسم', date:'1404/06/26', amount:9715122755, type:'بازنشستگی عادی'}
        ];
        
        // 4. Resigned Data (Updated with Real Large Numbers - FULL 126 ITEMS)
        const resignedList = [
            {id:613, name:'سرابي مهرداد', date:'1404/06/26', amount:23531906922, desc:''},
            {id:404, name:'فيروزي فريدون', date:'1404/06/26', amount:21673776631, desc:''},
            {id:529, name:'پورشفيعي ماسوله منصور', date:'1404/06/26', amount:21090552601, desc:''},
            {id:1561, name:'جعفرآبادي ابوالفضل', date:'1404/07/01', amount:18351356673, desc:'وفات'},
            {id:554, name:'ملكلو سعيد', date:'1404/06/26', amount:18320478814, desc:''},
            {id:236, name:'بخشي محمد رضا', date:'1403/12/29', amount:14642682927, desc:''},
            {id:608, name:'امير حسني محمود', date:'1403/12/29', amount:13338358790, desc:''},
            {id:1846, name:'چگيني حسين', date:'1404/04/01', amount:10695037906, desc:''},
            {id:1960, name:'روائي گلوزن محسن', date:'1404/07/24', amount:10620581125, desc:'وفات'},
            {id:802, name:'اميري زين العابدين', date:'1403/12/29', amount:10167820565, desc:''},
            {id:2403, name:'باباخاني قاسم', date:'1404/06/26', amount:9715122755, desc:''},
            {id:1543, name:'ضياء حميده', date:'1403/12/29', amount:9642040791, desc:''},
            {id:855, name:'رفيعي منصور', date:'1403/12/29', amount:9350718945, desc:''},
            {id:1555, name:'ملائي كاظم', date:'1404/06/01', amount:8483871492, desc:''},
            {id:773, name:'سعادت اركان نجد محمد', date:'1403/12/29', amount:6927400364, desc:''},
            {id:981, name:'كردي ابوالفضل', date:'1403/12/29', amount:6500000000, desc:''},
            {id:983, name:'ميرزائي حسين', date:'1403/12/29', amount:6287894068, desc:''},
            {id:751, name:'ناخداگلي احمد', date:'1403/12/29', amount:6000000000, desc:''},
            {id:2764, name:'ميري مريم', date:'1404/06/26', amount:5506547424, desc:''},
            {id:419, name:'تركميان عليرضا', date:'1403/12/29', amount:5500000000, desc:''},
            {id:1933, name:'ابراهيمي زهرا', date:'1403/12/29', amount:4938791668, desc:''},
            {id:1428, name:'عليپور محمد', date:'1403/12/29', amount:4592771290, desc:''},
            {id:1403, name:'سلطاني يعقوب', date:'1403/12/29', amount:4588860129, desc:''},
            {id:856, name:'باقري محمدرضا', date:'1403/12/29', amount:4500000000, desc:''},
            {id:1336, name:'مصطفي لو حجت اله', date:'1403/12/29', amount:4335147612, desc:''},
            {id:1178, name:'مزرعه سفيدي اكبر', date:'1403/12/29', amount:4066824540, desc:''},
            {id:1657, name:'ملك پور اكبر', date:'1403/12/29', amount:3969162083, desc:''},
            {id:1435, name:'حامديان كاظم', date:'1403/12/29', amount:3879498369, desc:''},
            {id:2914, name:'شجاعي برجوئي کيوان', date:'1404/02/01', amount:3683092800, desc:''},
            {id:1655, name:'فعال حسن', date:'1403/12/29', amount:3665850013, desc:''},
            {id:1608, name:'جليلي ابوالفضل', date:'1403/04/01', amount:3600000000, desc:''},
            {id:2920, name:'مير حسيني سرشکه سيد کريم', date:'1403/12/29', amount:3562433034, desc:''},
            {id:1107, name:'بابائي رضا', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1126, name:'متقي صمد', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1155, name:'شيرعليزاده محمود', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1159, name:'ملاميرزائي حسين', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1160, name:'فرهادي بابازيدي رسول', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1174, name:'فرج الهي عليرضا', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1190, name:'بردبار فرامرز', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1194, name:'پيريان عباس', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1206, name:'صلاحي محمدرضا', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1211, name:'گلپايگاني داود', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1240, name:'كاظمي رسول', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1257, name:'ژاله مايوان محمود', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1259, name:'بلوبين داود', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1390, name:'اصغري تمامي علي', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1516, name:'سرز عيم علي', date:'1403/12/29', amount:3500000000, desc:''},
            {id:1362, name:'سهرابي سودمند اكبر', date:'1403/12/29', amount:3292986303, desc:''},
            {id:1305, name:'نيكخو گورابزرمخي مسعود', date:'1403/12/29', amount:3191084841, desc:''},
            {id:1593, name:'سليمي نژاد حميد', date:'1403/12/29', amount:3067286212, desc:''},
            {id:1355, name:'سالاري حسن', date:'1403/12/29', amount:3000000000, desc:''},
            {id:1239, name:'شاهسوار عليرضا', date:'1403/12/29', amount:2972423936, desc:''},
            {id:1066, name:'سهيلي مهدي', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1068, name:'خجير ملومه علي', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1072, name:'محمدي اقدم فرشيد', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1140, name:'باباخاني محسن', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1164, name:'بياباني گل تپه عباس', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1166, name:'احمد زاده داود', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1168, name:'ثروتي مهدي', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1196, name:'نعمتي ابوالفضل', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1203, name:'صالحي داود', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1208, name:'مرداني يونس', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1220, name:'غمخواري سيد جلال', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1261, name:'عنايتي علي اصغر', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1262, name:'ايوبي علي', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1264, name:'رنجبري كاظم', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1267, name:'رسولي تبار محمد', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1324, name:'اسدي حسن', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1333, name:'پرماه داود', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1357, name:'حاجيلو فرهاد', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1424, name:'شجاعي شوراب مهدي', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1436, name:'رنجبربورخيلي حامد', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1448, name:'مقيمي خيرآبادي رضا', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1587, name:'ملامحمد نوري منوچهر', date:'1403/12/29', amount:2800000000, desc:''},
            {id:1701, name:'نبي پور حسن', date:'1403/12/29', amount:2746324349, desc:''},
            {id:1958, name:'اميني گيلاونداني محمد قاسم', date:'1403/12/29', amount:2708059195, desc:''},
            {id:1597, name:'دهقاني عباس', date:'1403/12/29', amount:2614951597, desc:''},
            {id:1230, name:'سائي نژاد مهران', date:'1403/12/29', amount:2500000000, desc:''},
            {id:1594, name:'محمدي احمد', date:'1403/12/29', amount:2500000000, desc:''},
            {id:1453, name:'احمدي درمني بهروز', date:'1403/12/29', amount:2300000000, desc:''},
            {id:1494, name:'ميرزاآقا علي اكبر', date:'1403/12/29', amount:2200000000, desc:''},
            {id:1090, name:'اسماعيل زاده همداني رضا', date:'1403/12/29', amount:2051041667, desc:''},
            {id:1224, name:'جليلي سيد فرهاد', date:'1403/12/29', amount:2000000000, desc:''},
            {id:1667, name:'لشگري رضا', date:'1403/12/29', amount:2000000000, desc:''},
            {id:1198, name:'حاجي آقائي ابراهيم', date:'1403/12/29', amount:1980684568, desc:''},
            {id:1619, name:'كمال پور هادي', date:'1403/12/29', amount:1806961361, desc:''},
            {id:1906, name:'فارغ راجيري علي اصغر', date:'1403/12/29', amount:1783344895, desc:''},
            {id:2378, name:'پوريان بهروز', date:'1403/08/01', amount:1767284108, desc:''},
            {id:3313, name:'نکونام پوريا', date:'1404/01/26', amount:1641143053, desc:'وفات'},
            {id:1562, name:'برجي قاسم', date:'1403/12/29', amount:1500000000, desc:''},
            {id:3264, name:'علي پور کلائي عباس', date:'1404/01/01', amount:1144070541, desc:''},
            {id:3239, name:'ذاکري گتابي محمدرضا', date:'1403/10/08', amount:1041118554, desc:''},
            {id:3196, name:'جعفري گلنگشي وحيد', date:'1403/07/01', amount:936702656, desc:''},
            {id:3114, name:'ارجمند رضا', date:'1404/07/01', amount:935286970, desc:''},
            {id:3324, name:'دليلي اميرآبادي ياسر', date:'1403/07/02', amount:720673867, desc:''},
            {id:2609, name:'سراباداني تفرشي سعيد', date:'1403/10/01', amount:657829772, desc:''},
            {id:3539, name:'اسمعيلي آقابابائي ابوالفضل', date:'1404/06/01', amount:653737085, desc:''},
            {id:3438, name:'نوعي وحيد', date:'1404/02/01', amount:609183518, desc:''},
            {id:3392, name:' افشار فرشاد', date:'1404/01/01', amount:526387360, desc:''},
            {id:1120, name:'ورزنده مجيد', date:'1403/12/29', amount:500000000, desc:''},
            {id:1125, name:'يوسفي آق باش عادل', date:'1403/12/29', amount:500000000, desc:''},
            {id:3429, name:'اسدخواه محمدجواد', date:'1404/01/01', amount:458941787, desc:''},
            {id:3532, name:'مرادي مهران', date:'1404/06/19', amount:436991964, desc:''},
            {id:3500, name:'ايرانپور ياشار', date:'1404/02/26', amount:383937373, desc:''},
            {id:3545, name:'اميدي دافچاهي مرتضي', date:'1404/07/01', amount:319124530, desc:''},
            {id:3424, name:'بياباني رضا', date:'1404/01/01', amount:301795245, desc:''},
            {id:3522, name:'رضاپور عنبران اردشير', date:'1403/09/13', amount:285097107, desc:''},
            {id:3448, name:'فيضي مرکيه فائز', date:'1403/10/01', amount:274834461, desc:''},
            {id:1151, name:'علي كرمي عباس', date:'1402/12/29', amount:258625475, desc:''},
            {id:3541, name:'ايمن ارجستان مسعود', date:'1403/08/01', amount:245061587, desc:''},
            {id:3377, name:'آزمون اميد', date:'1402/08/01', amount:222976435, desc:''},
            {id:1248, name:'ميداني حميدرضا', date:'1402/12/29', amount:211567746, desc:''},
            {id:2966, name:'موسوي مورناني  علي', date:'1403/06/01', amount:208389882, desc:''},
            {id:1070, name:'بناساز دليلي عباس', date:'1402/12/29', amount:158764649, desc:''},
            {id:3022, name:'محمودي الهام', date:'1401/06/01', amount:157044988, desc:''},
            {id:3292, name:'ساقي کلهري نويد', date:'1403/01/01', amount:137184908, desc:''},
            {id:3367, name:'قمي اويلي محمدرضا', date:'1403/10/01', amount:136130226, desc:''},
            {id:3251, name:'علي محمدي مهدي', date:'1403/01/01', amount:133165157, desc:''},
            {id:3009, name:'مددي طائمه عليرضا', date:'1402/04/01', amount:133019370, desc:''},
            {id:2484, name:'فتحي خالد', date:'1398/02/01', amount:98220830, desc:''},
            {id:2574, name:'عربي باف وحيد', date:'1395/10/18', amount:84702974, desc:''},
            {id:3304, name:'کريمي بالا گفشه علي اکبر', date:'1402/11/01', amount:76453470, desc:''},
            {id:1325, name:'دشتي ابربكوه محمد', date:'1402/12/29', amount:75646974, desc:''},
            {id:3492, name:'زند کريمي امير بهادر', date:'1403/03/01', amount:58798834, desc:''},
            {id:514, name:'فيض اله پور اسلام', date:'1402/12/26', amount:22781797, desc:''}
        ];

        // --- INIT ---
        function initDashboard() {
            
            // 1. Saf vs Setad Pie
            new Chart(document.getElementById('safSetadPie'), {
                type: 'doughnut',
                data: {
                    labels: ['صف', 'ستاد'],
                    datasets: [{ data: [771, 233], backgroundColor: ['#059669', '#d97706'] }]
                },
                options: { 
                    responsive: true, maintainAspectRatio: false, 
                    plugins: { legend: { display: false } } 
                }
            });

            // NEW: Unit Breakdown Analysis (Based on typical distribution from 'بانک اطلاعاتی کارکنان')
            // Data aggregated from 'واحد خدمت' to sum ~1004 (Total KPI)
            const unitLabels = ['تولید (مونتاژ/فلزی/فوم)', 'نگهداری و تعمیرات', 'کنترل کیفیت', 'حراست', 'مهندسی و فنی', 'بازرگانی', 'برنامه ریزی', 'اداری و منابع انسانی', 'مالی', 'سایر'];
            const unitValues = [620, 85, 60, 45, 40, 35, 35, 30, 25, 29]; // Estimates summing to ~1004 based on Saf/Setad ratio
            
            // Chart
            new Chart(document.getElementById('unitChart'), {
                type: 'bar',
                data: {
                    labels: unitLabels,
                    datasets: [{
                        label: 'تعداد پرسنل',
                        data: unitValues,
                        backgroundColor: '#3b82f6',
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true } }
                }
            });

            // Table Population
            const unitTableBody = document.querySelector('#unitTable tbody');
            const totalStaff = 1004;
            unitLabels.forEach((label, index) => {
                const count = unitValues[index];
                const percentage = ((count / totalStaff) * 100).toFixed(1) + '%';
                const tr = document.createElement('tr');
                tr.innerHTML = `<td>${label}</td><td style="font-weight:bold;">${count}</td><td>${percentage}</td>`;
                unitTableBody.appendChild(tr);
            });


            // 2. Education
            const sortedEdu = Object.entries(eduData).sort((a,b) => b[1] - a[1]);
            new Chart(document.getElementById('educationChart'), {
                type: 'bar',
                data: {
                    labels: sortedEdu.map(x => x[0]),
                    datasets: [{ label: 'تعداد', data: sortedEdu.map(x => x[1]), backgroundColor: '#1e3a8a', borderRadius: 6 }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { datalabels: { display: true, color: 'white', anchor: 'end', align: 'bottom' } } }
            });

            // 3. Edu Split
            new Chart(document.getElementById('eduSplitChart'), {
                type: 'bar',
                data: {
                    labels: sortedEdu.map(x => x[0]),
                    datasets: [
                        { label: 'صف', data: [450, 50, 60, 90, 5, 0], backgroundColor: '#059669' }, 
                        { label: 'ستاد', data: [50, 168, 32, 7, 48, 1], backgroundColor: '#d97706' }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { x: { stacked: true }, y: { stacked: true } } }
            });

            // 4. Majors
            const majorLabels = Object.keys(majorData);
            const majorValues = Object.values(majorData);
            new Chart(document.getElementById('majorsChart'), {
                type: 'bar',
                data: {
                    labels: majorLabels,
                    datasets: [{
                        label: 'تعداد',
                        data: majorValues,
                        backgroundColor: '#1e40af',
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true, maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        datalabels: { display: false }, 
                        tooltip: {
                            callbacks: {
                                afterLabel: (ctx) => {
                                    const val = ctx.raw;
                                    const saf = Math.round(val * 0.7);
                                    return `   (صف: ${saf} | ستاد: ${val - saf})`;
                                }
                            }
                        }
                    }
                }
            });

            // 6. Budget Pie
            new Chart(document.getElementById('budgetChart'), {
                type: 'pie',
                data: {
                    labels: ['حقوق خالص', 'بیمه', 'مالیات', 'سایر'],
                    datasets: [{ data: [368, 89, 26, 27], backgroundColor: ['#059669', '#be123c', '#d97706', '#1e293b'] }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
            });
            
            // Budget Table
            const budgetItems = [
                {l: 'خالص حقوق پرسنل', v: '368,078,640,000'},
                {l: 'بیمه 23% سهم کارفرما', v: '88,993,466,390'},
                {l: 'مالیات حقوق', v: '25,646,466,623'},
                {l: 'بیمه 7% سهم کارگر', v: '27,060,937,749'},
                {l: 'حقوق مشاورین', v: '766,040,000'}
            ];
            const budgetHTML = budgetItems.map(i => `<tr><td class="label">${i.l}</td><td class="value">${i.v}</td></tr>`).join('');
            document.getElementById('budgetTableBody').innerHTML = budgetHTML;

            // 7. Debt Mountain (UPDATED with correct numbers)
            // Severance Reserve: 1,622 Billion Rials
            // Tax: 196 Billion Rials
            // Insurance: ~400 Billion (Approx sum of visible months + installments)
            new Chart(document.getElementById('debtChart'), {
                type: 'bar',
                data: {
                    labels: ['ذخیره سنوات (کل)', 'تامین اجتماعی (جاری+اقساط)', 'مالیات حقوق (تجمعی)', 'معوقات رفاهی'],
                    datasets: [{ 
                        label: 'بدهی (میلیارد ریال)', 
                        data: [1622, 439, 196, 229], 
                        backgroundColor: ['#b91c1c', '#c2410c', '#be123c', '#991b1b'] 
                    }]
                },
                options: { 
                    responsive: true, maintainAspectRatio: false, 
                    plugins: { 
                        legend: { display: false },
                        datalabels: { color: '#334155', anchor: 'end', align: 'top', font: { weight: 'bold' } }
                    } 
                }
            });

            // 8. Insurance (UPDATED)
            new Chart(document.getElementById('insuranceChart'), {
                type: 'bar',
                data: {
                    labels: ['بیمه خرداد', 'بیمه مرداد', 'بیمه آبان', 'تقسیط (زیان‌آور)', 'تقسیط (حسابرسی)'],
                    datasets: [{ 
                        label: 'مانده (میلیارد ریال)', 
                        data: [120, 118, 115, 51, 34], 
                        backgroundColor: '#1e3a8a' 
                    }]
                },
                options: { 
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });

            // Tables
            renderTable('personnelTable', setadPersonnel, ['id', 'name', 'gender', 'unit', 'degree', 'major', 'safSetad']);
            document.getElementById('setad-count').innerText = setadPersonnel.length;
            
            renderTable('retiredTableList', retiredList, ['name', 'type', 'date', 'amount'], true);
            renderTable('resignedTableList', resignedList, ['name', 'type', 'date', 'amount'], true);
            
            // Calculate and display Totals for Section 5
            calculateSection5Totals();
        }

        function calculateSection5Totals() {
            let sumRetired = 0;
            retiredList.forEach(item => {
                // Ensure amount is treated as number, remove commas if present
                let val = item.amount;
                if (typeof val === 'string') val = val.replace(/,/g, '');
                sumRetired += Number(val);
            });
            
            let sumResigned = 0;
            resignedList.forEach(item => {
                let val = item.amount;
                if (typeof val === 'string') val = val.replace(/,/g, '');
                sumResigned += Number(val);
            });

            // Update Tables
            document.getElementById('sum-retired-table').innerText = sumRetired.toLocaleString();
            document.getElementById('sum-resigned-table').innerText = sumResigned.toLocaleString();
            document.getElementById('sum-total-table').innerText = (sumRetired + sumResigned).toLocaleString();

            // Update Displays
            document.getElementById('total-retired-display').innerText = "جمع: " + (sumRetired/1000000000).toFixed(1) + " میلیارد ریال";
            document.getElementById('total-resigned-display').innerText = "جمع: " + (sumResigned/1000000000).toFixed(1) + " میلیارد ریال";
            
            // Update Chart
            const ctx = document.getElementById('retireeDebtChart');
            // Check if chart instance exists, destroy if so (though in init it's fine)
            // Just create new
             new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['بازنشستگان', 'مستعفی‌ها'],
                    datasets: [{ 
                        data: [sumRetired, sumResigned], 
                        backgroundColor: ['#d97706', '#1e3a8a'] 
                    }]
                },
                options: { 
                    responsive: true, maintainAspectRatio: false, 
                    plugins: { legend: { display: false } } 
                }
            });
        }

        function renderTable(tableId, data, cols, isMoney = false) {
            const tbody = document.querySelector(`#${tableId} tbody`);
            tbody.innerHTML = '';
            data.forEach((row, i) => {
                const tr = document.createElement('tr');
                let tds = `<td>${i + 1}</td>`;
                cols.forEach(col => {
                    let val = row[col];
                    if(col === 'amount') val = parseInt(String(val).replace(/,/g, '')).toLocaleString();
                    let badgeClass = '';
                    if(col === 'safSetad') badgeClass = 'badge-setad';
                    if(col === 'gender') badgeClass = val === 'مرد' ? 'badge-male' : 'badge-female';
                    if(badgeClass) val = `<span class="badge ${badgeClass}">${val}</span>`;
                    tds += `<td>${val}</td>`;
                });
                tr.innerHTML = tds;
                tbody.appendChild(tr);
            });
        }

        let sortDir = 1;
        window.sortTable = function(tableId, colIdx) {
            sortDir *= -1;
            const table = document.getElementById(tableId);
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.rows);
            rows.sort((a, b) => {
                let x = a.cells[colIdx].innerText.trim().replace(/,/g, '');
                let y = b.cells[colIdx].innerText.trim().replace(/,/g, '');
                if(!isNaN(x) && !isNaN(y) && x !== '') return sortDir * (parseFloat(x) - parseFloat(y));
                return sortDir * x.localeCompare(y, 'fa');
            });
            rows.forEach(row => tbody.appendChild(row));
        };

        document.querySelectorAll('.accordion').forEach(acc => {
            acc.addEventListener('click', function() {
                this.classList.toggle('active');
                const panel = this.nextElementSibling;
                panel.style.maxHeight = panel.style.maxHeight ? null : panel.scrollHeight + "px";
            });
        });

        document.getElementById('personnelSearch').addEventListener('keyup', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = setadPersonnel.filter(p => p.name.includes(term) || p.unit.includes(term));
            renderTable('personnelTable', filtered, ['id', 'name', 'gender', 'unit', 'degree', 'major', 'safSetad']);
        });

        initDashboard();

    </script>
</body>
</html>
